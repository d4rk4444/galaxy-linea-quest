import Web3 from 'web3';
import { info } from './other.js';
import { uniAbi } from './abi.js';

export const dataSwapETHToUSDC = async(rpc, addressTo) => {
    const w3 = new Web3(new Web3.providers.HttpProvider(rpc));
    const contract = new w3.eth.Contract(uniAbi, info.routerUniswap);

    const valueTX = 0.0001 * 10**18;
    const data = await contract.methods.execute(
        "0x0b00",
        [
            "0x000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000005af3107a4000",
            "0x000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000005af3107a400000000000000000000000000000000000000000000000000000000000206709ac00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002bb4fbf271143f4fbf7b91a5ded31805e42b2208d600271007865c6e87b9f70255377e024ace6630c1eaa37f000000000000000000000000000000000000000000"
        ],
        Date.now() + 5 * 60 * 1000,
    );
    
    const encodeABI = data.encodeABI();
    const estimateGas = await data.estimateGas({ from: addressTo, value: valueTX });
    return { encodeABI, estimateGas, valueTX };
}